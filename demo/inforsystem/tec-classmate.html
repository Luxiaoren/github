<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/tec-style-classmate.css"/>
    <title>教师-学生管理</title>
</head>
<body>
<header>
    <a href="">大学信息基础作业管理系统</a>
    <div id="setting">
        <a href="">康勇</a>
        <div id="bott">
            <a href="#">修改密码</a>
            <a href="#">退出</a>
        </div>
    </div>
</header>
<aside>
    <div class="home">
        <a href="main.html" class="top"><img src="image/i-2.png" alt=""></a>
    </div>
    <a href="#" id="stu" onclick="changelist(this,stulist,false);return false;">学生模块</a>
    <ul id="stulist">
        <li><a href="stu-basefile.html">基本资料</a></li>
        <li><a href="stu-classdate.html" >班级情况</a></li>
        <li><a href="stu-homewok.html">家庭作业</a></li>
        <li><a href="stu-classconf.html">班级通知</a></li>
    </ul>
    <a href="#" id="tec" onclick="changelist(this,teclist,true);return false;">教师模块</a><!--false表示初始高度为隐藏高度时-->
    <ul id="teclist">
        <li><a href="tec-basefile.html">基本资料</a></li>
        <li><a href="tec-classdate.html">班级情况</a></li>
        <li><a href="tec-classmate.html">人员管理</a></li>
        <li><a href="tec-homework.html">班级作业</a></li>
    </ul>
    <a href="#" id="admin" onclick="changelist(this,adminlist,false);return false;">管理员模块</a>
    <ul id="adminlist">
        <li><a href="admin-peo.html">人员信息</a></li>
        <li><a href="admin-abouts.html">关于我们</a></li>
        <li><a href="admin-contacts.html">联系我们</a></li>
    </ul>
</aside>
<div id="main">
    <div class="bar">教师 > 人员管理
    </div>
    <div id="classList" class="margin">
        <div class="className">
            计科1401班
            <div class="btn">展开</div>
        </div>
        <div class="classInfo">
            <ul class="clear ">
                <li class="infoTitle">
                    <p class="pmenu">学号</p><p>姓名</p><p>性别</p><p>民族</p><p>身份证号</p><p>家庭住址</p><p>联系方式</p><p>邮箱</p><p>操作</p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p>2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>
                <li class="infoTitle">
                    <p >2014014010</p><p>张三</p><p>男</p><p>汉</p><p>31231423424242342</p><p>安徽省安庆市曹杨路101号</p><p>14144324234</p><p>123123131@qq.com</p><p></p>
                </li>


            </ul>
        </div>
        <div class="className">
            计科1401班
            <div class="btn">展开</div>
        </div>
        <div class="classInfo">
            <ul class="clear">
                <li><span>班级名称:</span><p>计算机科学与技术1401班</p></li>
                <li><span>班级人数:</span><p>60</p></li>
                <li><span>班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;长:</span><p>李班长</p></li>
                <li><span>班委成员:</span><p>张三，李四，王二，李五</p></li>
                <li><span>最近活动:</span><p>无</p></li>

            </ul>
        </div>
        <div id="addBtn"></div>
    </div>

</div>
<div id="rightmeun">
    新建
</div>
</body>
<script src="js/style.js"></script>
<script src="js/common.js"></script>
<script>
    let op=document.querySelectorAll('li p');
    let obtn=document.querySelectorAll('.btn');
    let omenu=document.querySelector('.pmenu');
    let omenuCon=document.querySelector('#rightmeun');
    let addnum=0;
// console.log(op);

        for(let i=0;i<op.length;i++){
            let str=getCookie(`tec-classmate${i}`);
            if(str){
                op[i].innerHTML=str;
            }
        }

    let cookieaddnum=getCookie('tec-classmateaddnum');
        if(cookieaddnum){
            addnum=cookieaddnum;
            for(let i=1;i<=cookieaddnum;i++){
                let addli=document.createElement('li');
                for(let j=0;j<9;j++){
                    let addp=document.createElement('p');
                    addp.innerHTML=getCookie(`tec-classmateadd${i}${j}`)||"";
                    addp.style['border-bottom']="1px solid gray";
                    addli.appendChild(addp);
                    ///////////////////////////////////////////////////////////////////////////////
                }
                op[0].parentNode.parentNode.appendChild(addli);

            }
        }

    for(let i=0;i<obtn.length;i++){
        obtn[i].onclick=function () {

            let dis=getComputedStyle(this.parentNode.nextElementSibling,false)['display'];
            if(dis==="block"){
                this.parentNode.nextElementSibling.style.display="none";
                this.innerHTML="展开";

            }else{
                this.parentNode.nextElementSibling.style.display="block";
                this.innerHTML="折叠";

            }
        }
    }

    omenu.oncontextmenu=function(e){
        e.preventDefault();
        omenuCon.style.display="block";
        omenuCon.style.left=e.clientX+'px';
        omenuCon.style.top=e.clientY+'px';

    };
    omenuCon.onmouseout=function () {
        omenuCon.style.display="none";
    };
    
    omenuCon.onmouseover=function(e){
        e.stopPropagation();
        this.style.display="block";
    };
    omenuCon.onclick=function () {/*点击新建按钮*/
        console.log(1);
        let addli=document.createElement('li');
        for(let i=0;i<9;i++){
            let oop=document.createElement('p');
            oop.innerHTML=" ";
            oop.style['border-left']="1px solid gray";
            oop.style['border-bottom']="1px solid gray";
            oop.style.height="30px";

            addli.appendChild(oop);

        }
        addli.children[0].className="pmenu";
        for(let i=0;i<addli.children.length;i++){/*给新建的添加点击编辑事件*/
            addli.children[i].onclick=function(){
                this.index=i;
                let myinput=document.createElement('input');
                myinput.type="text";
                myinput.value=this.innerHTML;
                myinput.style.width=this.offsetWidth-15+'px';
                myinput.style.outline="none";
                myinput.style.height=this.offsetHeight-6+"px";
                this.innerHTML="";
                this.appendChild(myinput);
                myinput.focus();
                myinput.onclick=function (e) {
                    e.stopPropagation();
                };
                let that=this;
                myinput.onblur=function () {
                    that.innerHTML=this.value;
                    setCookie(`tec-classmateadd${addnum}${that.index}`,this.value,24*60*60);
                }
            }
        }
        addnum+=1;
        setCookie(`tec-classmateaddnum`,addnum,24*60*60);
        omenu.parentNode.parentNode.appendChild(addli);

    };
    for(let i=0;i<op.length;i++){
        let op=document.querySelectorAll('li p');

        op[i].onclick=function () {
            this.index=i;
            let myinput=document.createElement('input');
            myinput.type="text";
            myinput.value=this.innerHTML;
            myinput.style.width=this.offsetWidth-15+'px';
            myinput.style.outline="none";
            myinput.style.height=this.offsetHeight-6+"px";
            let value=this.innerHTML;
            this.innerHTML="";
            this.appendChild(myinput);
            myinput.focus();
            myinput.onclick=function (e) {
                e.stopPropagation();
            };
            let that=this;
            myinput.onblur=function () {
                if(value!==this.value){


                setCookie(`tec-classmate${that.index}`,this.value,24*60*60);
                }else{

                }
                that.innerHTML=this.value;

            }
        }
    }
</script>
</html>